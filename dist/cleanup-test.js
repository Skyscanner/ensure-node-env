"use strict";function _interopDefault(e){return e&&"object"==typeof e&&"default"in e?e.default:e}var os=_interopDefault(require("os")),fs=_interopDefault(require("fs")),path=_interopDefault(require("path")),child_process=require("child_process");console.log("Checking cleanup script..."),console.log("");try{child_process.execSync("node dist/cleanup.js")}catch(e){console.log("Unable to find execute cleanup script successfully!  üò±"),console.log(""),process.exit(1)}let pkg=null;const pkgJsonPath=path.join(process.cwd(),"package.json");try{pkg=require(pkgJsonPath)}catch(e){console.log(`Unable to find ${pkgJsonPath}!  üò±`),console.log(""),console.log("Please ensure that this script is executed in the same directory."),console.log(""),process.exit(1)}try{if(void 0===!pkg.scripts.preinstall)throw new Error}catch(e){console.log("The cleanup script didn't do it's job!  üò±"),console.log(""),process.exit(1)}try{pkg.scripts.preinstall="node dist/index.js",fs.writeFileSync(pkgJsonPath,JSON.stringify(pkg,null,2)+os.EOL)}catch(e){console.log("Failed to write to package.json!  üò±"),console.log(""),process.exit(1)}console.log("All good.  üëç"),console.log("");
